
<div class="d-flex align-items-center">
  <a routerLink="/carrinho" class="position-relative text-decoration-none text-dark me-4">
    <i class="bi bi-cart3 fs-3"></i>
    
    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
          *ngIf="carrinhoService.quantidadeTotal > 0">
      {{ carrinhoService.quantidadeTotal }}
      <span class="visually-hidden">itens no carrinho</span>
    </span>
  </a>
</div>

<div class="container mt-5">

 <button type="button" class="btn-voltar" (click)="voltar()">
  ← Voltar para Produtos
</button>

  <!-- Loading -->
  <div *ngIf="!produto" class="text-center py-5">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-3">Carregando produto...</p>
  </div>

  <!-- Conteúdo do Produto -->
  <div class="row" *ngIf="produto">
    <!-- Imagem Grande -->
    <div class="col-lg-6 mb-4">
      <div class="image-detail-container">
        <img [src]="produto.imagem" 
             [alt]="produto.nome" 
             class="img-fluid rounded shadow"
             (error)="onImgError($event)">
      </div>
    </div>

    <!-- Informações do Produto -->
    <div class="col-lg-6">
      <small class="text-muted">{{ produto.categoria }}</small>
      <h1 class="display-5 fw-bold mt-2">{{ produto.nome }}</h1>
      
      <div class="price-big my-4">
        R$ {{ produto.preco | number:'1.2-2' }}
      </div>

      <div class="stock-info mb-4" [class.text-danger]="produto.estoque <= 5">
        Estoque: <strong>{{ produto.estoque }} unidades disponíveis</strong>
      </div>

      <hr>

      <h4 class="mt-5 mb-3">Descrição do Produto</h4>
      <p class="lead text-muted">{{ produto.descricao }}</p>

      <button class="btn btn-success btn-lg w-100 mt-4" 
              (click)="addToCart(produto)" 
              [disabled]="produto.estoque === 0">
        Adicionar ao Carrinho
      </button>
    </div>
  </div>
</div>